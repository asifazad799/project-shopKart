<link rel="stylesheet" href="assets/css/style.css">
<link rel="stylesheet" href="/stylesheets/userlogin.css">
<style>
  .show{
    display: block;
  }

.stop-scrolling {
            height: 100%;
            overflow: hidden;
        }
</style>
<header class="header header-9" style="position: fixed;">
  <div class="header-middle sticky-header" >
    <div class="container">
      <div class="header-left" style="margin-left: -4px;">
        <button class="mobile-menu-toggler" onclick="stopScroll()" id="mobile">
          <span class="sr-only">Toggle mobile menu</span>
          <i class="icon-bars" style="color: black;"></i>
        </button>

        <a href="/" class="logo">
          {{!-- <img
            src="assets/images/demos/demo-12/logo.png"
            alt="Molla Logo"
            width="82"
            height="25"
          /> --}}
          <h2 class="shopkartlogo me-5">shopKart</h2>
        </a>
        <nav class="main-nav">
          <ul class="menu sf-arrows">
            <li class="megamenu-container active">
              <a href="/" class="homeshort">Home</a>
                {{!-- sf-with-ul --}}
            
            </li>
            <li>
              <a href="/catProducts?category=men" class="homeshort">Men</a>

          
            </li>
            <li>
              <a href="/catProducts?category=women" class="homeshort">Women</a>

             
            </li>
            <li>
              <a href="/catProducts?category=kids" class="homeshort">Kids</a>

              
            </li>
           
            
          </ul><!-- End .menu -->
        </nav><!-- End .main-nav -->
      </div><!-- End .header-left -->

      <div class="header-right" >
        

        <div class="header-search" >
          <a href="#" class="search-toggle" role="button" >
            <i class="icon-search allSearch" ></i></a>
          <form action="#" method="get">
            <div class="header-search-wrapper">
              <label for="q" class="sr-only">Search</label>
              <input type="search" class="form-control" name="q" id="q" placeholder="Search in..." required style="background-color: rgb(206, 206, 206)
              ; "/>
            </div><!-- End .header-search-wrapper -->
          </form>
        </div><!-- End .header-search -->
          <div class="dropdown">
            {{!-- <button class="dropbtn">Dropdown</button> --}}
            <a class="dropdown2" onclick="btnToggle()" id="dropdown1"><i class="far fa-user-circle profileShortcut" style="color: black;"></i></a>
            <div class="dropdown-content" id="dropdown-content1">
              {{#if currentUser}}
              <a href="/profileShorcut" id="currentUser" class="text-dark text-center">{{currentUser.email}}</a>
              <a class="btn" href="/userLogout">Log Out</a>
              {{else}}
              <a class="btn" href="/userLogin" id="currentUser">Log In</a>
              <a class="btn" href="/userSignUp">Sign Up</a>
              {{/if}}
              {{!-- <a href="#">Link 2</a>
              <a href="#">Link 3</a> --}}
            </div>
          </div>
       
       <div class=" cart-dropdown">

        <a
            href="/cart"
            class="dropdown-toggle"
            role="button"
          
          
            aria-expanded="false"
            data-display="static"
            style="font-weight: bolder;"
          >
            <i class="fal fa-shopping-cart fa-sm cartAll"></i>
            <span class="cart-count" id="cartCount">{{userCartCount}}</span>
          
          </a>

       </div>
      <div class=" cart-dropdown">
            <a
            href="/wishlist"
            class="dropdown-toggle"
            role="button"
          
          
            aria-expanded="false"
            data-display="static"
            style="font-weight: bolder;"
          >
            <i class="icon-heart-o wishlistIcon" ></i>
            <span class="cart-count" id="wishListCount">{{whishListCount}}</span>
          
          </a>

       </div>
        
        

       

       
      </div><!-- End .header-right -->
    </div><!-- End .container -->
  </div><!-- End .header-middle -->
</header><!-- End .header -->
  <!-- Mobile Menu -->
    <!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container mobile-menu-light"  >
      <div class="mobile-menu-wrapper">
        <span class="mobile-menu-close" onclick="enableScroll()"><i class="icon-close"></i></span>

        <form action="#" method="get" class="mobile-search">
          <label for="mobile-search" class="sr-only">Search</label>
          <input
            type="search"
            class="form-control"
            name="mobile-search"
            id="mobile-search"
            placeholder="Search in..."
            required
          />
          <button class="btn btn-primary" type="submit">
            <i class="icon-search"></i>
          </button>
        </form>

        <nav class="mobile-nav">
    
          <ul class="mobile-menu">
            <li class="active">
              <a href="/">Home</a>

              
            </li>
           
            <li>
              <a  class="sf-with-ul">Product</a>
              <ul>
                
                <li><a href="/catProducts?category=men">Men</a></li>
                <li><a href="/catProducts?category=women">Women</a></li>
                <li><a href="/catProducts?category=kids">Kids</a></li>

              </ul>
            </li>
            <li>
              <a>Profile</a>
              <ul>

                <li><a href="/editUserProfile">Edit Profile</a></li>
                <li><a href="/changePassword">Reset Password</a></li>

              </ul>
            </li>
            <li>
              <a href="blog.html">Blog</a>

              <ul>
                <li><a href="blog.html">Classic</a></li>
                <li><a href="blog-listing.html">Listing</a></li>
                <li>
                  <a href="#">Grid</a>
                  <ul>
                    <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                    <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                    <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                    <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#">Masonry</a>
                  <ul>
                    <li>
                      <a href="blog-masonry-2cols.html">Masonry 2 columns</a>
                    </li>
                    <li>
                      <a href="blog-masonry-3cols.html">Masonry 3 columns</a>
                    </li>
                    <li>
                      <a href="blog-masonry-4cols.html">Masonry 4 columns</a>
                    </li>
                    <li>
                      <a href="blog-masonry-sidebar.html">Masonry sidebar</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#">Mask</a>
                  <ul>
                    <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                    <li>
                      <a href="blog-mask-masonry.html">Blog mask masonry</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#">Single Post</a>
                  <ul>
                    <li><a href="single.html">Default with sidebar</a></li>
                    <li>
                      <a href="single-fullwidth.html">Fullwidth no sidebar</a>
                    </li>
                    <li>
                      <a href="single-fullwidth-sidebar.html"
                        >Fullwidth with sidebar</a
                      >
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a href="elements-list.html">Elements</a>
              <ul>
                <li><a href="elements-products.html">Products</a></li>
                <li><a href="elements-typography.html">Typography</a></li>
                <li><a href="elements-titles.html">Titles</a></li>
                <li><a href="elements-banners.html">Banners</a></li>
                <li>
                  <a href="elements-product-category.html">Product Category</a>
                </li>
                <li><a href="elements-video-banners.html">Video Banners</a></li>
                <li><a href="elements-buttons.html">Buttons</a></li>
                <li><a href="elements-accordions.html">Accordions</a></li>
                <li><a href="elements-tabs.html">Tabs</a></li>
                <li><a href="elements-testimonials.html">Testimonials</a></li>
                <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                <li><a href="elements-portfolio.html">Portfolio</a></li>
                <li><a href="elements-cta.html">Call to Action</a></li>
                <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
              </ul>
            </li>
          </ul>
        </nav>
        <!-- End .mobile-nav -->

        <div class="social-icons">
          <a href="#" class="social-icon" target="_blank" title="Facebook"
            ><i class="icon-facebook-f"></i
          ></a>
          <a href="#" class="social-icon" target="_blank" title="Twitter"
            ><i class="icon-twitter"></i
          ></a>
          <a href="#" class="social-icon" target="_blank" title="Instagram"
            ><i class="icon-instagram"></i
          ></a>
          <a href="#" class="social-icon" target="_blank" title="Youtube"
            ><i class="icon-youtube"></i
          ></a>
        </div>
        <!-- End .social-icons -->
      </div>
      <!-- End .mobile-menu-wrapper -->
    </div>
    <!-- End .mobile-menu-container --> 

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="assets/js/jquery.min.js"></script>

<script>

function stopScroll(){
  
  document.body.classList.add("stop-scrolling");

}

function enableScroll(){
  
  document.body.classList.remove("stop-scrolling");

}
  

let click = 0


    function btnToggle() {

      if(click == 0){

        document.getElementById("dropdown-content1").style.display="block";
        click=1;

      }else if(click==1){
        
        document.getElementById("dropdown-content1").style.display="none";
        click=0;

      }
        
    }
     



        $(document).click((event) => {
          if(click == 1){
        if (!$(event.target).closest('.dropdown').length) {
          // the click occured outside '#element'
         
          document.getElementById("dropdown-content1").style.display="none";
        click=0;
         
        }  
          }      
       
      
      })



          
        // Prevents menu from closing when clicked inside
      
          
        // Closes the menu in the event of outside click
        


  
 

  
  



     
function addToCart(product,subTotal){
  //console.log(subTotal)
  let user = document.getElementById('currentUser').innerHTML
    $.ajax({
      
      url:'/addToCart',
      method:'post',
      data:{productId:product,subTotal:subTotal},
      success:(response)=>{
        if(response.valid){
          
          let cartCount = $('#cartCount').html();
          cartCount = parseInt(cartCount)+1;
          $('#cartCount').html(cartCount)

        }else{
          
          Swal.fire({

            position: 'middle',
            icon: 'error',
            title: 'Same product already in your cart',
            showConfirmButton: false,
            timer: 2000
            
          })

        }
      }
    })
}
function addToWishlist(productId){
    
   
    $.ajax({

      
      url:'/addToWishlist',
      method:'post',
      data:{productId:productId},
      success:(response)=>{
        
        //console.log(response)
        if(response.addedToWishlist){
          let wishCount = $('#wishListCount').html();
              wishCount = parseInt(wishCount)+1;
              $('#wishListCount').html(wishCount)
          //console.log('addedtowishlist')
          const Toast = Swal.mixin({
            toast: true,
            position: 'top',
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
              toast.addEventListener('mouseenter', Swal.stopTimer)
              toast.addEventListener('mouseleave', Swal.resumeTimer)
            }
              
          })

          Toast.fire({
            icon: 'success',
            title: 'Product added to Wishlist'
          })

        
        }else if(response.logIn){
          
          window.location.href = '/userLogin'

        }
        else{
          
          //console.log('not added to wishlist')
          const Toast = Swal.mixin({
            toast: true,
            position: 'top',
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
              toast.addEventListener('mouseenter', Swal.stopTimer)
              toast.addEventListener('mouseleave', Swal.resumeTimer)
            }
          })

          Toast.fire({
            icon: 'error',
            title: 'Same product already on Wishlist'
          })

        }

      }

    })

  }
  
  function pleaseLogin(){
    
    const Toast = Swal.mixin({
      toast: true,
      position: 'top-end',
      showConfirmButton: false,
      timer: 2000,
      timerProgressBar: true,
      didOpen: (toast) => {
        toast.addEventListener('mouseenter', Swal.stopTimer)
        toast.addEventListener('mouseleave', Swal.resumeTimer)
      }
    })

    Toast.fire({
      icon: 'error',
      title: 'Please Log In First',
      
    })

  } 
    

  
</script>   